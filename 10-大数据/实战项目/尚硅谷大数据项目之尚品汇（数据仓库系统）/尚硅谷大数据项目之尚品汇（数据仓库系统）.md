# 尚硅谷大数据项目之尚品汇（数据仓库系统）

## 第1章 数仓分层

### 1.1 为什么要分层

### 1.2 数据集市与数据仓库概念

### 1.3 数仓命名规范

- 1.3.1 表命名
- 1.3.2 脚本命名
- 1.3.3 表字段类型

## 第2章 数仓理论

### 2.1 范式理论

- 2.1.1 范式概念
- 2.1.2 函数依赖
- 2.1.3 三范式区分

### 2.2 关系建模与维度建模

- 2.2.1 关系建模
- 2.2.2 维度建模

### 2.3 维度表和事实表（重点）

- 2.3.1 维度表
- 2.3.2 事实表

### 2.4 维度模型分类

### 2.5 数据仓库建模（绝对重点）

- 2.5.1 ODS层
- 2.5.2 DIM层和DWD层
- 2.5.3 DWS层与DWT层
- 2.5.4 ADS层

## 第3章 数仓环境搭建

### 3.1 Hive环境搭建

- 3.1.1 Hive引擎简介
- 3.1.2 Hive on Spark配置
- 3.1.3 Hive on Spark测试

### 3.2 Yarn配置

- 3.2.1 增加ApplicationMaster资源比例

### 3.3 数仓开发环境

### 3.4 数据准备

## 第4章 数仓搭建-ODS层

### 4.1 ODS层（用户行为数据）

- 4.1.1 创建日志表ods_log
- 4.1.2 Shell中单引号和双引号区别
- 4.1.3 ODS层日志表加载数据脚本

### 4.2 ODS层（业务数据）

- 4.2.1 活动信息表
- 4.2.2 活动规则表
- 4.2.3 一级品类表
- 4.2.4 二级品类表
- 4.2.5 三级品类表
- 4.2.6 编码字典表
- 4.2.7 省份表
- 4.2.8 地区表
- 4.2.9 品牌表
- 4.2.10 购物车表
- 4.2.11 评论表
- 4.2.12 优惠券信息表
- 4.2.13 优惠券领用表
- 4.2.14 收藏表
- 4.2.15 订单明细表
- 4.2.16 订单明细活动关联表
- 4.2.17 订单明细优惠券关联表
- 4.2.18 订单表
- 4.2.19 退单表
- 4.2.20 订单状态日志表
- 4.2.21 支付表
- 4.2.22 退款表
- 4.2.23 商品平台属性表
- 4.2.24 商品（SKU）表
- 4.2.25 商品销售属性表
- 4.2.26 商品（SPU）表
- 4.2.27 用户表
- 4.2.28 ODS层业务表首日数据装载脚本
- 4.2.29 ODS层业务表每日数据装载脚本

## 第5章 数仓搭建-DIM层

### 5.1 商品维度表（全量）

### 5.2 优惠券维度表（全量）

### 5.3 活动维度表（全量）

### 5.4 地区维度表（特殊）

### 5.5 时间维度表（特殊）

### 5.6 用户维度表（拉链表）

- 5.6.1 拉链表概述

### 5.7 DIM层首日数据装载脚本

### 5.8 DIM层每日数据装载脚本

## 第6章 数仓搭建-DWD层

### 6.1 DWD层（用户行为日志）

- 6.1.1 日志解析思路
- 6.1.2 get_json_object函数使用
- 6.1.3 启动日志表
- 6.1.4 页面日志表
- 6.1.5 动作日志表
- 6.1.6 曝光日志表
- 6.1.7 错误日志表

### 6.2 DWD层（业务数据）

- 6.2.1 评价事实表（事务型事实表）
- 6.2.2 订单明细事实表（事务型事实表）
- 6.2.3 退单事实表（事务型事实表）
- 6.2.4 加购事实表（周期型快照事实表，每日快照）
- 6.2.5 收藏事实表（周期型快照事实表，每日快照）
- 6.2.6 优惠券领用事实表（累积型快照事实表）
- 6.2.7 支付事实表（累积型快照事实表）
- 6.2.8 退款事实表（累积型快照事实表）
- 6.2.9 订单事实表（累积型快照事实表）
- 6.2.10 DWD层业务数据首日装载脚本
- 6.2.11 DWD层业务数据每日装载脚本

## 第7章 数仓搭建-DWS层

### 7.1 系统函数

- 7.1.1 nvl函数
- 7.1.2 日期处理函数
- 7.1.3 复杂数据类型定义

### 7.2 DWS层

- 7.2.1 访客主题
- 7.2.2 用户主题
- 7.2.3 商品主题
- 7.2.4 优惠券主题
- 7.2.5 活动主题
- 7.2.6 地区主题
- 7.2.7 DWS层首日数据装载脚本
- 7.2.8 DWS层每日数据装载脚本

## 第8章 数仓搭建-DWT层

### 8.1 访客主题

### 8.2 用户主题

### 8.3 商品主题

### 8.4 优惠券主题

### 8.5 活动主题

### 8.6 地区主题

### 8.7 DWT层首日数据导入脚本

### 8.8 DWT层每日数据导入脚本

## 第9章 数仓搭建-ADS层

### 9.1 建表说明

### 9.2 访客主题

- 9.2.1 访客统计
- 9.2.2 路径分析

### 9.3 用户主题

- 9.3.1 用户统计
- 9.3.2 用户变动统计
- 9.3.3 用户行为漏斗分析
- 9.3.4 用户留存率

### 9.4 商品主题

- 9.4.1 商品统计
- 9.4.2 品牌复购率

### 9.5 订单主题

- 9.5.1 订单统计
- 9.5.2 各地区订单统计

### 9.6 优惠券主题

- 9.6.1 优惠券统计

### 9.7 活动主题

- 9.7.1 活动统计

### 9.8 ADS层业务数据导入脚本

## 第10章 全流程调度

### 10.1 Azkaban部署

### 10.2 创建MySQL数据库和表

### 10.3 Sqoop导出脚本

### 10.4 全调度流程

- 10.4.1 数据准备
- 10.4.2 编写Azkaban工作流程配置文件
- 10.4.3 Azkaban多Executor模式下注意事项

*XMind - Trial Version*